{
  "execution_summary": {
    "total_duration_seconds": 30.469120979309082,
    "total_groups": 3,
    "successful_groups": 0,
    "failed_groups": 3,
    "success_rate_percent": 0.0,
    "parallel_efficiency": 0.5236692224381272
  },
  "phases_summary": {
    "interface_compliance": {
      "total_groups": 3,
      "successful_groups": 0,
      "failed_groups": 3,
      "total_duration": 58.1839063167572,
      "average_duration": 19.394635438919067
    }
  },
  "detailed_results": [
    {
      "phase": "interface_compliance",
      "group": "shared_interfaces",
      "command": "pytest tests/test_shared_interfaces.py -n 4 --dist=loadfile --tb=short",
      "exit_code": 1,
      "duration_seconds": 13.813470840454102,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 4/4 workers\n4 workers [0 items]\n\nscheduling tests via LoadFileScheduling\n\nERROR: Coverage failure: total of 11.83 is less than fail-under=80.00\n\n================================ tests coverage ================================\n___________________________________ coverage ___________________________________\n\n___________________________ coverage: failed workers ___________________________\n\nThe following workers failed to return coverage data, ensure that pytest-cov is installed on these workers.\ngw1\ngw0\ngw3\ngw2\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/storage/sqlite_store.py                  137    107     30      0  17.96%   29-30, 34-46, 51-60, 65-229, 253-269, 273-278, 285-311, 315-326, 337-351, 356-364, 371-388, 396-405, 409-417, 431-458, 471-482, 495-505, 515-525, 537-560, 565-566, 572-578\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7895   3044      9  11.83%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 11.83%\n============================ no tests ran in 10.05s ============================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "",
      "success": false
    },
    {
      "phase": "interface_compliance",
      "group": "plugin_interfaces",
      "command": "pytest tests/test_*_plugin.py::*InterfaceCompliance* -n 6 --dist=loadgroup --tb=short",
      "exit_code": 1,
      "duration_seconds": 13.904371976852417,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 6/6 workers\n6 workers [0 items]\n\nscheduling tests via LoadGroupScheduling\n\nERROR: Coverage failure: total of 11.83 is less than fail-under=80.00\n\n================================ tests coverage ================================\n___________________________________ coverage ___________________________________\n\n___________________________ coverage: failed workers ___________________________\n\nThe following workers failed to return coverage data, ensure that pytest-cov is installed on these workers.\ngw1\ngw0\ngw2\ngw3\ngw4\ngw5\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/storage/sqlite_store.py                  137    107     30      0  17.96%   29-30, 34-46, 51-60, 65-229, 253-269, 273-278, 285-311, 315-326, 337-351, 356-364, 371-388, 396-405, 409-417, 431-458, 471-482, 495-505, 515-525, 537-560, 565-566, 572-578\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7895   3044      9  11.83%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 11.83%\n============================ no tests ran in 10.20s ============================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "",
      "success": false
    },
    {
      "phase": "interface_compliance",
      "group": "storage_interfaces",
      "command": "pytest tests/test_sqlite_store.py -n 3 --dist=loadfile --tb=short",
      "exit_code": 1,
      "duration_seconds": 30.466063499450684,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 3/3 workers\n3 workers [38 items]\n\nscheduling tests via LoadFileScheduling\n\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \n[gw1] [  2%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \n[gw1] [  5%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \n[gw1] [  7%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \n[gw1] [ 10%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \n[gw1] [ 13%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \n[gw1] [ 15%] FAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \n[gw1] [ 18%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \n[gw1] [ 21%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \ntests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \n[gw1] [ 23%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \ntests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \n[gw1] [ 26%] FAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \ntests/test_sqlite_store.py::TestFileOperations::test_store_file \n[gw1] [ 28%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file \ntests/test_sqlite_store.py::TestFileOperations::test_store_file_update \n[gw1] [ 31%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file_update \ntests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \n[gw1] [ 34%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \ntests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \n[gw1] [ 36%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \n[gw1] [ 39%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \n[gw1] [ 42%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \ntests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \n[gw1] [ 44%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \ntests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \n[gw1] [ 47%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \ntests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \n[gw1] [ 50%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \ntests/test_sqlite_store.py::TestReferenceOperations::test_get_references \n[gw1] [ 52%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_get_references \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \n[gw1] [ 55%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \n[gw1] [ 57%] FAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \n[gw1] [ 60%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \n[gw1] [ 63%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \n[gw1] [ 65%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \ntests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \n[gw1] [ 68%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \n[gw1] [ 71%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \n[gw1] [ 73%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \ntests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \n[gw1] [ 76%] PASSED tests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \n[gw1] [ 78%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \n[gw1] [ 81%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \ntests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \n[gw1] [ 84%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \ntests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \n[gw1] [ 86%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \ntests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \n[gw1] [ 89%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \ntests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \n[gw1] [ 92%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \ntests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \n[gw1] [ 94%] FAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \ntests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \n[gw1] [ 97%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \ntests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \n[gw1] [100%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \nERROR: Coverage failure: total of 12.90 is less than fail-under=80.00\n\n\n=================================== FAILURES ===================================\n_____________ TestDatabaseInitialization.test_foreign_keys_enabled _____________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:112: in test_foreign_keys_enabled\n    assert cursor.fetchone()[0] == 1\nE   assert 0 == 1\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:52 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\n_____________ TestRepositoryOperations.test_repository_timestamps ______________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:171: in test_repository_timestamps\n    assert repo2['updated_at'] > repo1['created_at']\nE   AssertionError: assert '2025-05-31 01:46:54' > '2025-05-31 01:46:54'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:54 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\n________________ TestSearchOperations.test_fuzzy_search_scoring ________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:433: in test_fuzzy_search_scoring\n    assert results[0]['score'] > results[1]['score']\nE   assert 0.7142857142857143 > 0.7142857142857143\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:59 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\n________________ TestTransactionHandling.test_rollback_on_error ________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:614: in test_rollback_on_error\n    with pytest.raises(Exception):\nE   Failed: DID NOT RAISE <class 'Exception'>\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:03 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\n_____________ TestTransactionHandling.test_foreign_key_constraints _____________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:633: in test_foreign_key_constraints\n    with pytest.raises(sqlite3.IntegrityError):\nE   Failed: DID NOT RAISE <class 'sqlite3.IntegrityError'>\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:04 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\n______________ TestPerformance.test_symbol_insertion_performance _______________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:709: in test_symbol_insertion_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:07 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\n________________ TestPerformance.test_fuzzy_search_performance _________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:727: in test_fuzzy_search_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\n_________________ TestPerformance.test_fts_search_performance __________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:744: in test_fts_search_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\n================================ tests coverage ================================\n_______________ coverage: platform linux, python 3.12.10-final-0 _______________\n\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/storage/sqlite_store.py                  137      1     30      3  97.60%   440, 524->521, 549->553\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7789   3044     12  12.90%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 12.90%\n=========================== short test summary info ============================\nFAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled\nFAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps\nFAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints\nFAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance\n======================== 8 failed, 30 passed in 26.87s =========================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\n/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\n",
      "success": false
    }
  ],
  "failed_tests": [
    {
      "phase": "interface_compliance",
      "group": "shared_interfaces",
      "command": "pytest tests/test_shared_interfaces.py -n 4 --dist=loadfile --tb=short",
      "exit_code": 1,
      "duration_seconds": 13.813470840454102,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 4/4 workers\n4 workers [0 items]\n\nscheduling tests via LoadFileScheduling\n\nERROR: Coverage failure: total of 11.83 is less than fail-under=80.00\n\n================================ tests coverage ================================\n___________________________________ coverage ___________________________________\n\n___________________________ coverage: failed workers ___________________________\n\nThe following workers failed to return coverage data, ensure that pytest-cov is installed on these workers.\ngw1\ngw0\ngw3\ngw2\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/storage/sqlite_store.py                  137    107     30      0  17.96%   29-30, 34-46, 51-60, 65-229, 253-269, 273-278, 285-311, 315-326, 337-351, 356-364, 371-388, 396-405, 409-417, 431-458, 471-482, 495-505, 515-525, 537-560, 565-566, 572-578\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7895   3044      9  11.83%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 11.83%\n============================ no tests ran in 10.05s ============================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "",
      "success": false
    },
    {
      "phase": "interface_compliance",
      "group": "plugin_interfaces",
      "command": "pytest tests/test_*_plugin.py::*InterfaceCompliance* -n 6 --dist=loadgroup --tb=short",
      "exit_code": 1,
      "duration_seconds": 13.904371976852417,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 6/6 workers\n6 workers [0 items]\n\nscheduling tests via LoadGroupScheduling\n\nERROR: Coverage failure: total of 11.83 is less than fail-under=80.00\n\n================================ tests coverage ================================\n___________________________________ coverage ___________________________________\n\n___________________________ coverage: failed workers ___________________________\n\nThe following workers failed to return coverage data, ensure that pytest-cov is installed on these workers.\ngw1\ngw0\ngw2\ngw3\ngw4\ngw5\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/storage/sqlite_store.py                  137    107     30      0  17.96%   29-30, 34-46, 51-60, 65-229, 253-269, 273-278, 285-311, 315-326, 337-351, 356-364, 371-388, 396-405, 409-417, 431-458, 471-482, 495-505, 515-525, 537-560, 565-566, 572-578\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7895   3044      9  11.83%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 11.83%\n============================ no tests ran in 10.20s ============================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "",
      "success": false
    },
    {
      "phase": "interface_compliance",
      "group": "storage_interfaces",
      "command": "pytest tests/test_sqlite_store.py -n 3 --dist=loadfile --tb=short",
      "exit_code": 1,
      "duration_seconds": 30.466063499450684,
      "stdout": "============================= test session starts ==============================\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\ncachedir: .pytest_cache\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\nrootdir: /workspaces/Code-Index-MCP\nconfigfile: pytest.ini\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\ntimeout: 300.0s\ntimeout method: thread\ntimeout func_only: False\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\ncreated: 3/3 workers\n3 workers [38 items]\n\nscheduling tests via LoadFileScheduling\n\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \n[gw1] [  2%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \n[gw1] [  5%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \n[gw1] [  7%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \n[gw1] [ 10%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \n[gw1] [ 13%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \ntests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \n[gw1] [ 15%] FAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \n[gw1] [ 18%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \n[gw1] [ 21%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \ntests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \n[gw1] [ 23%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \ntests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \n[gw1] [ 26%] FAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \ntests/test_sqlite_store.py::TestFileOperations::test_store_file \n[gw1] [ 28%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file \ntests/test_sqlite_store.py::TestFileOperations::test_store_file_update \n[gw1] [ 31%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file_update \ntests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \n[gw1] [ 34%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \ntests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \n[gw1] [ 36%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \n[gw1] [ 39%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \n[gw1] [ 42%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \ntests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \n[gw1] [ 44%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \ntests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \n[gw1] [ 47%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \ntests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \n[gw1] [ 50%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \ntests/test_sqlite_store.py::TestReferenceOperations::test_get_references \n[gw1] [ 52%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_get_references \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \n[gw1] [ 55%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \n[gw1] [ 57%] FAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \n[gw1] [ 60%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \n[gw1] [ 63%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \n[gw1] [ 65%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \ntests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \n[gw1] [ 68%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \n[gw1] [ 71%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \n[gw1] [ 73%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \ntests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \n[gw1] [ 76%] PASSED tests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \n[gw1] [ 78%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \n[gw1] [ 81%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \ntests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \n[gw1] [ 84%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \ntests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \n[gw1] [ 86%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \ntests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \n[gw1] [ 89%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \ntests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \n[gw1] [ 92%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \ntests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \n[gw1] [ 94%] FAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \ntests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \n[gw1] [ 97%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \ntests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \n[gw1] [100%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \nERROR: Coverage failure: total of 12.90 is less than fail-under=80.00\n\n\n=================================== FAILURES ===================================\n_____________ TestDatabaseInitialization.test_foreign_keys_enabled _____________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:112: in test_foreign_keys_enabled\n    assert cursor.fetchone()[0] == 1\nE   assert 0 == 1\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:52 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\n_____________ TestRepositoryOperations.test_repository_timestamps ______________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:171: in test_repository_timestamps\n    assert repo2['updated_at'] > repo1['created_at']\nE   AssertionError: assert '2025-05-31 01:46:54' > '2025-05-31 01:46:54'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:54 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\n________________ TestSearchOperations.test_fuzzy_search_scoring ________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:433: in test_fuzzy_search_scoring\n    assert results[0]['score'] > results[1]['score']\nE   assert 0.7142857142857143 > 0.7142857142857143\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:46:59 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\n________________ TestTransactionHandling.test_rollback_on_error ________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:614: in test_rollback_on_error\n    with pytest.raises(Exception):\nE   Failed: DID NOT RAISE <class 'Exception'>\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:03 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\n_____________ TestTransactionHandling.test_foreign_key_constraints _____________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:633: in test_foreign_key_constraints\n    with pytest.raises(sqlite3.IntegrityError):\nE   Failed: DID NOT RAISE <class 'sqlite3.IntegrityError'>\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:04 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\n______________ TestPerformance.test_symbol_insertion_performance _______________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:709: in test_symbol_insertion_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:07 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\n________________ TestPerformance.test_fuzzy_search_performance _________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:727: in test_fuzzy_search_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\n_________________ TestPerformance.test_fts_search_performance __________________\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\ntests/test_sqlite_store.py:744: in test_fts_search_performance\n    from conftest import measure_time\nE   ModuleNotFoundError: No module named 'conftest'\n---------------------------- Captured stdout setup -----------------------------\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\n------------------------------ Captured log setup ------------------------------\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\n================================ tests coverage ================================\n_______________ coverage: platform linux, python 3.12.10-final-0 _______________\n\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\n----------------------------------------------------------------------------------------------\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\nmcp_server/storage/sqlite_store.py                  137      1     30      3  97.60%   440, 524->521, 549->553\nmcp_server/__init__.py                                2      0      0      0 100.00%\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\n----------------------------------------------------------------------------------------------\nTOTAL                                              9350   7789   3044     12  12.90%\nCoverage HTML written to dir htmlcov\nCoverage XML written to file coverage.xml\nFAIL Required test coverage of 80% not reached. Total coverage: 12.90%\n=========================== short test summary info ============================\nFAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled\nFAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps\nFAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints\nFAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance\n======================== 8 failed, 30 passed in 26.87s =========================\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\n",
      "stderr": "/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\n/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\n",
      "success": false
    }
  ],
  "performance_metrics": {
    "fastest_group": "TestResult(phase='interface_compliance', group='shared_interfaces', command='pytest tests/test_shared_interfaces.py -n 4 --dist=loadfile --tb=short', exit_code=1, duration_seconds=13.813470840454102, stdout=\"============================= test session starts ==============================\\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\\ncachedir: .pytest_cache\\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\\nrootdir: /workspaces/Code-Index-MCP\\nconfigfile: pytest.ini\\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\\ntimeout: 300.0s\\ntimeout method: thread\\ntimeout func_only: False\\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\\ncreated: 4/4 workers\\n4 workers [0 items]\\n\\nscheduling tests via LoadFileScheduling\\n\\nERROR: Coverage failure: total of 11.83 is less than fail-under=80.00\\n\\n================================ tests coverage ================================\\n___________________________________ coverage ___________________________________\\n\\n___________________________ coverage: failed workers ___________________________\\n\\nThe following workers failed to return coverage data, ensure that pytest-cov is installed on these workers.\\ngw1\\ngw0\\ngw3\\ngw2\\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\\n----------------------------------------------------------------------------------------------\\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\\nmcp_server/storage/sqlite_store.py                  137    107     30      0  17.96%   29-30, 34-46, 51-60, 65-229, 253-269, 273-278, 285-311, 315-326, 337-351, 356-364, 371-388, 396-405, 409-417, 431-458, 471-482, 495-505, 515-525, 537-560, 565-566, 572-578\\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\\nmcp_server/__init__.py                                2      0      0      0 100.00%\\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\\n----------------------------------------------------------------------------------------------\\nTOTAL                                              9350   7895   3044      9  11.83%\\nCoverage HTML written to dir htmlcov\\nCoverage XML written to file coverage.xml\\nFAIL Required test coverage of 80% not reached. Total coverage: 11.83%\\n============================ no tests ran in 10.05s ============================\\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\\n\", stderr='', success=False)",
    "slowest_group": "TestResult(phase='interface_compliance', group='storage_interfaces', command='pytest tests/test_sqlite_store.py -n 3 --dist=loadfile --tb=short', exit_code=1, duration_seconds=30.466063499450684, stdout=\"============================= test session starts ==============================\\nplatform linux -- Python 3.12.10, pytest-8.3.5, pluggy-1.6.0 -- /usr/local/bin/python3.12\\ncachedir: .pytest_cache\\nbenchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)\\nmetadata: {'Python': '3.12.10', 'Platform': 'Linux-5.15.167.4-microsoft-standard-WSL2-x86_64-with-glibc2.31', 'Packages': {'pytest': '8.3.5', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'xdist': '3.7.0', 'anyio': '4.9.0', 'benchmark': '5.1.0', 'timeout': '2.4.0', 'asyncio': '1.0.0', 'metadata': '3.1.1', 'cov': '6.1.1'}}\\nrootdir: /workspaces/Code-Index-MCP\\nconfigfile: pytest.ini\\nplugins: html-4.1.1, xdist-3.7.0, anyio-4.9.0, benchmark-5.1.0, timeout-2.4.0, asyncio-1.0.0, metadata-3.1.1, cov-6.1.1\\ntimeout: 300.0s\\ntimeout method: thread\\ntimeout func_only: False\\nasyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function\\ncreated: 3/3 workers\\n3 workers [38 items]\\n\\nscheduling tests via LoadFileScheduling\\n\\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \\n[gw1] [  2%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_creates_database \\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \\n[gw1] [  5%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_init_existing_database \\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \\n[gw1] [  7%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_schema_tables_created \\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \\n[gw1] [ 10%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_fts_tables_created \\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \\n[gw1] [ 13%] PASSED tests/test_sqlite_store.py::TestDatabaseInitialization::test_indexes_created \\ntests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \\n[gw1] [ 15%] FAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled \\ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \\n[gw1] [ 18%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository \\ntests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \\n[gw1] [ 21%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_create_repository_duplicate \\ntests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \\n[gw1] [ 23%] PASSED tests/test_sqlite_store.py::TestRepositoryOperations::test_get_repository_not_found \\ntests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \\n[gw1] [ 26%] FAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps \\ntests/test_sqlite_store.py::TestFileOperations::test_store_file \\n[gw1] [ 28%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file \\ntests/test_sqlite_store.py::TestFileOperations::test_store_file_update \\n[gw1] [ 31%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_store_file_update \\ntests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \\n[gw1] [ 34%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_get_file_with_repository \\ntests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \\n[gw1] [ 36%] PASSED tests/test_sqlite_store.py::TestFileOperations::test_file_metadata_json \\ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \\n[gw1] [ 39%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol \\ntests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \\n[gw1] [ 42%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_store_symbol_creates_trigrams \\ntests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \\n[gw1] [ 44%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_get_symbol_by_kind \\ntests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \\n[gw1] [ 47%] PASSED tests/test_sqlite_store.py::TestSymbolOperations::test_symbol_fts_triggers \\ntests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \\n[gw1] [ 50%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_store_reference \\ntests/test_sqlite_store.py::TestReferenceOperations::test_get_references \\n[gw1] [ 52%] PASSED tests/test_sqlite_store.py::TestReferenceOperations::test_get_references \\ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \\n[gw1] [ 55%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_basic \\ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \\n[gw1] [ 57%] FAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring \\ntests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \\n[gw1] [ 60%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_empty_query \\ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \\n[gw1] [ 63%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_basic \\ntests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \\n[gw1] [ 65%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_fts_search_name_and_docs \\ntests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \\n[gw1] [ 68%] PASSED tests/test_sqlite_store.py::TestSearchOperations::test_search_code_fts \\ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \\n[gw1] [ 71%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_persist_fuzzy_index \\ntests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \\n[gw1] [ 73%] PASSED tests/test_sqlite_store.py::TestFuzzyIndexPersistence::test_load_fuzzy_index \\ntests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \\n[gw1] [ 76%] PASSED tests/test_sqlite_store.py::TestCacheOperations::test_clear_expired_cache \\ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \\n[gw1] [ 78%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_empty \\ntests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \\n[gw1] [ 81%] PASSED tests/test_sqlite_store.py::TestStatistics::test_get_statistics_populated \\ntests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \\n[gw1] [ 84%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error \\ntests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \\n[gw1] [ 86%] FAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints \\ntests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \\n[gw1] [ 89%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_concurrent_writes \\ntests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \\n[gw1] [ 92%] PASSED tests/test_sqlite_store.py::TestConcurrency::test_read_write_concurrency \\ntests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \\n[gw1] [ 94%] FAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance \\ntests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \\n[gw1] [ 97%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance \\ntests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \\n[gw1] [100%] FAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance \\nERROR: Coverage failure: total of 12.90 is less than fail-under=80.00\\n\\n\\n=================================== FAILURES ===================================\\n_____________ TestDatabaseInitialization.test_foreign_keys_enabled _____________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:112: in test_foreign_keys_enabled\\n    assert cursor.fetchone()[0] == 1\\nE   assert 0 == 1\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:46:52 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_keys_enabled0/test_code_index.db\\n_____________ TestRepositoryOperations.test_repository_timestamps ______________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:171: in test_repository_timestamps\\n    assert repo2['updated_at'] > repo1['created_at']\\nE   AssertionError: assert '2025-05-31 01:46:54' > '2025-05-31 01:46:54'\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:46:54 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_repository_timestamps0/test_code_index.db\\n________________ TestSearchOperations.test_fuzzy_search_scoring ________________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:433: in test_fuzzy_search_scoring\\n    assert results[0]['score'] > results[1]['score']\\nE   assert 0.7142857142857143 > 0.7142857142857143\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:46:59 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_scoring0/test_code_index.db\\n________________ TestTransactionHandling.test_rollback_on_error ________________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:614: in test_rollback_on_error\\n    with pytest.raises(Exception):\\nE   Failed: DID NOT RAISE <class 'Exception'>\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:47:03 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_rollback_on_error0/test_code_index.db\\n_____________ TestTransactionHandling.test_foreign_key_constraints _____________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:633: in test_foreign_key_constraints\\n    with pytest.raises(sqlite3.IntegrityError):\\nE   Failed: DID NOT RAISE <class 'sqlite3.IntegrityError'>\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:47:04 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_foreign_key_constraints0/test_code_index.db\\n______________ TestPerformance.test_symbol_insertion_performance _______________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:709: in test_symbol_insertion_performance\\n    from conftest import measure_time\\nE   ModuleNotFoundError: No module named 'conftest'\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:47:07 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_symbol_insertion_performa0/test_code_index.db\\n________________ TestPerformance.test_fuzzy_search_performance _________________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:727: in test_fuzzy_search_performance\\n    from conftest import measure_time\\nE   ModuleNotFoundError: No module named 'conftest'\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fuzzy_search_performance0/test_code_index.db\\n_________________ TestPerformance.test_fts_search_performance __________________\\n[gw1] linux -- Python 3.12.10 /usr/local/bin/python3.12\\ntests/test_sqlite_store.py:744: in test_fts_search_performance\\n    from conftest import measure_time\\nE   ModuleNotFoundError: No module named 'conftest'\\n---------------------------- Captured stdout setup -----------------------------\\n2025-05-31 01:47:08 - mcp_server.storage.sqlite_store - INFO - Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\\n------------------------------ Captured log setup ------------------------------\\nINFO     mcp_server.storage.sqlite_store:sqlite_store.py:44 Initialized database schema at /tmp/pytest-of-vscode/pytest-39/popen-gw1/test_fts_search_performance0/test_code_index.db\\n================================ tests coverage ================================\\n_______________ coverage: platform linux, python 3.12.10-final-0 _______________\\n\\nName                                              Stmts   Miss Branch BrPart   Cover   Missing\\n----------------------------------------------------------------------------------------------\\nmcp_server/benchmarks/__init__.py                     3      3      0      0   0.00%   26-33\\nmcp_server/benchmarks/__main__.py                     1      1      0      0   0.00%   5\\nmcp_server/benchmarks/benchmark_runner.py           324    324    106      0   0.00%   11-705\\nmcp_server/benchmarks/benchmark_suite.py            367    367     78      0   0.00%   13-761\\nmcp_server/benchmarks/run_baseline.py               169    169     28      0   0.00%   22-1178\\nmcp_server/benchmarks/run_benchmarks.py              69     69     24      0   0.00%   16-156\\nmcp_server/indexer/__init__.py                        3      3      0      0   0.00%   8-30\\nmcp_server/indexer/index_engine.py                  318    318     94      0   0.00%   9-721\\nmcp_server/indexer/query_optimizer.py               328    328    102      0   0.00%   8-782\\nmcp_server/interfaces/api_gateway_interfaces.py      45     45      0      0   0.00%   8-339\\nmcp_server/interfaces/cache_interfaces.py            60     60      0      0   0.00%   7-477\\nmcp_server/interfaces/dispatcher_interfaces.py       53     53      0      0   0.00%   8-346\\nmcp_server/interfaces/indexing_interfaces.py         67     67      0      0   0.00%   7-445\\nmcp_server/interfaces/metrics_interfaces.py          67     67      0      0   0.00%   7-461\\nmcp_server/interfaces/security_interfaces.py         66     66      0      0   0.00%   7-427\\nmcp_server/interfaces/storage_interfaces.py          59     59      0      0   0.00%   7-504\\nmcp_server/plugins/cpp_plugin/__init__.py             2      2      0      0   0.00%   3-5\\nmcp_server/plugins/cpp_plugin/plugin.py             697    697    390      0   0.00%   1-1385\\nmcp_server/plugins/dart_plugin/__init__.py            2      2      0      0   0.00%   16-18\\nmcp_server/plugins/dart_plugin/plugin.py            627    627    214      0   0.00%   1-1325\\nmcp_server/plugins/html_css_plugin/__init__.py        2      2      0      0   0.00%   3-5\\nmcp_server/plugins/html_css_plugin/plugin.py        550    550    300      0   0.00%   1-1252\\nmcp_server/plugins/js_plugin/__init__.py              2      2      0      0   0.00%   3-5\\nmcp_server/plugins/js_plugin/plugin.py              455    455    296      0   0.00%   1-838\\nmcp_server/sync.py                                    1      1      0      0   0.00%   1\\nmcp_server/dispatcher/dispatcher.py                 324    288    124      0   8.04%   23-40, 49-52, 56-90, 95, 100, 105, 109-120, 131-140, 144-176, 180-201, 205-254, 267-295, 299, 303-333, 337-380, 385-424, 435-440, 451-460, 474-509, 518-525, 529-556, 560-620\\nmcp_server/plugins/python_plugin/plugin.py           95     81     40      0  10.37%   25-38, 42-47, 52, 56-124, 128-150, 154-168, 172-177, 183-185\\nmcp_server/plugin_system/plugin_discovery.py        143    122     58      0  10.45%   24-58, 62-83, 87-107, 111-131, 136-141, 145-179, 183-235, 240-293, 297-306\\nmcp_server/plugin_system/plugin_manager.py          293    251    100      0  10.69%   29-42, 46, 57-70, 74-119, 123-196, 200-235, 239-259, 263-274, 278-298, 302-314, 318-338, 342-350, 355-365, 369-384, 388-406, 412-452, 456-475, 479-498, 502-518, 522-529, 533-537, 541-550, 554-584, 588, 595, 602-611, 615-624\\nmcp_server/utils/fuzzy_indexer.py                   109     90     36      0  13.10%   8-9, 23-30, 35-54, 60-64, 69, 73-100, 104-120, 129-147, 156-171, 176-184, 200-211, 224-244, 249-267\\nmcp_server/plugin_system/plugin_loader.py           115     94     40      0  13.55%   23, 27-51, 55-77, 81-97, 101-121, 126-169, 174-187, 191-221\\nmcp_server/gateway.py                               520    432    124      0  13.66%   55-225, 232-255, 262-287, 292-307, 315-331, 336, 354-376, 386-408, 414, 419-440, 449-460, 466-470, 475-486, 493-555, 564-629, 634-707, 718-745, 761-833, 848-860, 875-892, 907-924, 933-962, 969-983, 991-1007, 1015-1034, 1041-1055, 1063-1083, 1090-1104\\nmcp_server/cache/backends.py                        413    335    106      0  15.03%   20-21, 39-42, 46-48, 52-53, 57, 71-72, 129-142, 146-156, 160-166, 170-184, 188-203, 206-221, 225-259, 263-266, 270-274, 277-283, 286-287, 290-295, 298-304, 307-320, 323-327, 342-357, 365-374, 378-385, 389-390, 394, 398-399, 403-404, 407-437, 441-479, 482-505, 508-515, 518-527, 530-539, 542-570, 573-594, 602, 611-615, 619-620, 625-626, 630-650, 655-663, 666-669, 672, 676-679, 682-684, 687-689, 692-695, 703-715\\nmcp_server/dispatcher/result_aggregator.py          321    253    126      0  15.21%   135-175, 180-212, 224, 231-282, 286-308, 313-323, 327-340, 345-389, 393-397, 401-412, 430-442, 447-515, 520-541, 545-571, 577-592, 596-605, 609-615, 619-629, 634-654, 658-683, 687, 700-701, 715-729\\nmcp_server/dispatcher/plugin_router.py              264    204    110      0  16.04%   248-253, 258-308, 312-326, 330-331, 335-336, 348-363, 372-387, 395-419, 423-438, 442-491, 495-524, 528-562, 566-577, 581-627, 631-649, 653-656, 665-673, 677-690, 702-704\\nmcp_server/metrics/health_check.py                  184    146     40      0  16.96%   42-65, 73-92, 102-105, 109-145, 156-192, 200-230, 238-268, 283-327, 338-386, 390-391, 405-408, 418-419\\nmcp_server/security/auth_manager.py                 250    195     74      0  16.98%   80, 84, 88, 92-100, 107-109, 113-145, 152-166, 173-192, 196, 200, 206-242, 246-251, 256-280, 284-305, 309-337, 341-368, 372-384, 390-415, 419-429, 433, 437-444, 450-451, 455-460, 469-482, 486\\nmcp_server/plugin_system/plugin_registry.py         101     77     36      0  17.52%   19-22, 26-49, 54-75, 79-102, 106-126, 130, 134, 138, 142, 146, 151-153, 157-166, 170-174, 178-182, 196-201\\nmcp_server/cache/cache_manager.py                   286    213     76      0  20.17%   131-139, 143-178, 182-192, 196-206, 210-220, 224-228, 232-255, 260-279, 283-297, 301-311, 315-325, 329-339, 344-355, 359-368, 373-381, 385-387, 392-408, 413-433, 438-443, 447-457, 461-468, 478-484, 490-496, 503-510, 515\\nmcp_server/security/security_middleware.py          187    135     44      0  22.51%   32, 51-52, 56-72, 77-86, 93-94, 98-104, 111-113, 121-155, 159, 163-170, 174-182, 189-190, 195-247, 251-260, 264-272, 279-280, 285-308, 312-318, 322-328, 335-340, 345-355, 361-366, 373-389, 397-399, 404-428, 432-467\\nmcp_server/watcher.py                                58     41     26      2  22.62%   12-15, 19-25, 29-47, 51-71, 76, 80-81, 83->exit, 84->exit\\nmcp_server/cache/query_cache.py                     228    157     70      0  23.83%   67-72, 76, 80-81, 88-92, 97-107, 111-118, 123-146, 150-166, 170-176, 180-197, 201-232, 236-256, 260-274, 278-292, 296-315, 319-343, 347-355, 362-363, 388, 393, 398, 403, 408\\nmcp_server/metrics/middleware.py                    111     75     26      1  27.01%   32-140, 155-181, 193-204, 216-225, 249-278, 289-312, 327-337, 356-359, 373->376\\nmcp_server/utils/treesitter_wrapper.py               34     23      6      0  27.50%   26-36, 42-54, 60-61, 67-69, 75\\nmcp_server/metrics/metrics_collector.py             192    104     52      4  38.52%   26, 43, 47, 63-65, 69-81, 135, 141->143, 151->153, 157-163, 168-173, 177-234, 238-280, 292-308, 312-316, 324-325, 344-347, 357-358\\nmcp_server/core/errors.py                            22     12      2      0  41.67%   17-19, 23-25, 40-41, 56-57, 72-73\\nmcp_server/plugin_system/models.py                  174     65     40      0  50.93%   48-51, 66-78, 103, 108, 113, 117-119, 156-178, 187-226, 230-234, 238-245\\nmcp_server/security/models.py                       151     27     20      1  73.10%   50-54, 58-60, 76-78, 88-90, 94-96, 130, 157-159, 163-165, 169-171\\nmcp_server/interfaces/shared_interfaces.py           89     20      0      0  77.53%   76, 81, 402-405, 410-412, 417-419, 424-427, 432-435\\nmcp_server/plugin_system/interfaces.py               27      6      0      0  77.78%   45, 49, 81, 85, 154, 158\\nmcp_server/metrics/__init__.py                       44      4      4      0  83.33%   40-41, 54-55\\nmcp_server/core/logging.py                           19      1      2      1  90.48%   21->24, 66\\nmcp_server/storage/sqlite_store.py                  137      1     30      3  97.60%   440, 524->521, 549->553\\nmcp_server/__init__.py                                2      0      0      0 100.00%\\nmcp_server/cache/__init__.py                          5      0      0      0 100.00%\\nmcp_server/core/__init__.py                           3      0      0      0 100.00%\\nmcp_server/dispatcher/__init__.py                     4      0      0      0 100.00%\\nmcp_server/interfaces/__init__.py                     3      0      0      0 100.00%\\nmcp_server/interfaces/plugin_interfaces.py           62      0      0      0 100.00%\\nmcp_server/plugin_base.py                            30      0      0      0 100.00%\\nmcp_server/plugin_system/__init__.py                  4      0      0      0 100.00%\\nmcp_server/plugins/__init__.py                        0      0      0      0 100.00%\\nmcp_server/plugins/python_plugin/__init__.py          2      0      0      0 100.00%\\nmcp_server/security/__init__.py                       7      0      0      0 100.00%\\nmcp_server/storage/__init__.py                        0      0      0      0 100.00%\\n----------------------------------------------------------------------------------------------\\nTOTAL                                              9350   7789   3044     12  12.90%\\nCoverage HTML written to dir htmlcov\\nCoverage XML written to file coverage.xml\\nFAIL Required test coverage of 80% not reached. Total coverage: 12.90%\\n=========================== short test summary info ============================\\nFAILED tests/test_sqlite_store.py::TestDatabaseInitialization::test_foreign_keys_enabled\\nFAILED tests/test_sqlite_store.py::TestRepositoryOperations::test_repository_timestamps\\nFAILED tests/test_sqlite_store.py::TestSearchOperations::test_fuzzy_search_scoring\\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_rollback_on_error\\nFAILED tests/test_sqlite_store.py::TestTransactionHandling::test_foreign_key_constraints\\nFAILED tests/test_sqlite_store.py::TestPerformance::test_symbol_insertion_performance\\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fuzzy_search_performance\\nFAILED tests/test_sqlite_store.py::TestPerformance::test_fts_search_performance\\n======================== 8 failed, 30 passed in 26.87s =========================\\n2025-05-31 01:46:45 - mcp_server.core.logging - INFO - Logging initialized - Level: INFO, File: mcp_server.log\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: system\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: memory\\n2025-05-31 01:46:45 - mcp_server.metrics.health_check - INFO - Registered health check for component: disk\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized business metrics collector\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized global business metrics collector\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Initialized metrics middleware\\n2025-05-31 01:46:45 - mcp_server.metrics.middleware - INFO - Added metrics middleware to FastAPI application\\n\", stderr='/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\\n/home/vscode/.local/lib/python3.12/site-packages/coverage/control.py:915: CoverageWarning: No data was collected. (no-data-collected)\\n  self._warn(\"No data was collected.\", slug=\"no-data-collected\")\\n', success=False)",
    "total_test_time": 58.1839063167572
  }
}